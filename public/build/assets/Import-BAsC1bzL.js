import{e as h,x as $,q as w,c as a,o as d,a as c,k as l,u as i,g as S,f as g,b as s,l as m,t,F as f,i as y,p as E,T as N}from"./app-Drxg6_yr.js";import{_ as q}from"./AuthenticatedLayout-DRRzTg1e.js";import{P as A}from"./PrimaryButton-Bohlji5Y.js";import{_ as B}from"./InputLabel-gKrxyeqv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},V={class:"py-12"},C={class:"max-w-3xl mx-auto sm:px-6 lg:px-8"},F={class:"overflow-hidden bg-white shadow-sm dark:bg-gray-800 sm:rounded-lg"},M={class:"p-6"},j={key:0,class:"p-4 mb-4 text-green-700 bg-green-100 border border-green-300 rounded dark:border-green-600 dark:bg-green-700/30 dark:text-green-300"},P={key:1,class:"p-4 mb-4 text-red-700 bg-red-100 border border-red-300 rounded dark:border-red-600 dark:bg-red-700/30 dark:text-red-300"},T={class:"mb-2 font-bold"},D={class:"space-y-1 overflow-y-auto text-sm list-disc max-h-60 ps-5"},O={class:"font-semibold"},U={key:0,class:"block text-xs text-gray-600 dark:text-gray-400"},L={key:2,class:"p-4 mb-4 text-red-700 bg-red-100 border border-red-300 rounded dark:border-red-600 dark:bg-red-700/30 dark:text-red-300"},R={class:"mb-2 font-bold"},z={class:"space-y-1 text-sm list-disc ps-5"},G=["disabled"],H={class:"mt-1 text-sm text-gray-500 dark:text-gray-400",id:"file_input_help"},J={class:"flex items-center gap-4"},K={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},Q={class:"pt-6 mt-8 border-t dark:border-gray-700"},W={class:"mb-2 text-lg font-semibold text-gray-700 dark:text-gray-300"},X={class:"mb-1 text-sm text-gray-600 dark:text-gray-400"},Y={class:"space-y-1 text-sm text-gray-600 list-disc ps-5 dark:text-gray-400"},Z={class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},ee={href:"/examples/user_import_template.csv",download:"",class:"text-blue-600 hover:underline dark:text-blue-400"},ae={__name:"Import",props:{errors:Object,successMessage:String,importErrors:Array},setup(v){const n=v,_=h(null),o=$({csv_file:null}),k=e=>{const r=e.target.files[0];r?(_.value=r,o.csv_file=r):(_.value=null,o.csv_file=null)},x=()=>{if(!o.csv_file){alert("Please select a CSV file to import.");return}o.post(route("users.import.store"),{preserveScroll:!0,onSuccess:()=>{o.reset(),_.value=null;const e=document.getElementById("csv_file_input");e&&(e.value=null)},onError:e=>{}})},b=w(()=>n.importErrors?n.importErrors.map(e=>{let r=e.values;return Array.isArray(e.values)&&(r=e.values.join(" | ")),{row:e.row||"N/A",message:e.message||"Unknown error",values:r||"N/A"}}):[]);return(e,r)=>(d(),a(f,null,[c(i(S),{title:e.$t("import_users_title")},null,8,["title"]),r[7]||(r[7]=l()),c(q,null,{header:g(()=>[s("h2",I,t(e.$t("import_users_header")),1)]),default:g(()=>[s("div",V,[s("div",C,[s("div",F,[s("div",M,[n.successMessage&&!i(o).recentlySuccessful?(d(),a("div",j,t(n.successMessage),1)):m("",!0),b.value.length>0&&!i(o).recentlySuccessful?(d(),a("div",P,[s("h3",T,t(e.$t("import_processing_errors_title")),1),r[0]||(r[0]=l()),s("ul",D,[(d(!0),a(f,null,y(b.value,(u,p)=>(d(),a("li",{key:p},[s("span",O,t(e.$t("import_error_row"))+" "+t(u.row)+":",1),l(" "+t(u.message)+" ",1),u.values&&u.values!=="N/A"?(d(),a("span",U,"("+t(e.$t("data_values"))+": "+t(u.values)+")",1)):m("",!0)]))),128))])])):m("",!0),n.errors&&Object.keys(n.errors).length>0&&!i(o).recentlySuccessful?(d(),a("div",L,[s("h3",R,t(e.$t("form_validation_errors_title")),1),r[1]||(r[1]=l()),s("ul",z,[(d(!0),a(f,null,y(n.errors,(u,p)=>(d(),a("li",{key:p},t(u),1))),128))])])):m("",!0),s("form",{onSubmit:E(x,["prevent"]),class:"space-y-6"},[s("div",null,[c(B,{for:"csv_file_input",value:e.$t("select_csv_file_label"),class:"mb-1"},null,8,["value"]),s("input",{type:"file",id:"csv_file_input",onChange:k,accept:".csv, text/csv",class:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400 dark:placeholder-gray-400",disabled:i(o).processing},null,40,G),s("p",H,t(e.$t("csv_file_format_note")),1)]),s("div",J,[c(A,{disabled:i(o).processing||!i(o).csv_file},{default:g(()=>[l(t(i(o).processing?e.$t("processing_button"):e.$t("import_button")),1)]),_:1},8,["disabled"]),c(N,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:g(()=>[i(o).recentlySuccessful?(d(),a("p",K,t(e.$t("import_submitted_message")),1)):m("",!0)]),_:1})])],32),s("div",Q,[s("h4",W,t(e.$t("csv_format_guidelines_title")),1),s("p",X,t(e.$t("csv_ensure_header_row")),1),s("ul",Y,[s("li",null,[l(t(e.$t("csv_column_student_id"))+" ",1),r[2]||(r[2]=s("code",{class:"px-1 text-xs bg-gray-200 rounded dark:bg-gray-600"},"student_id",-1)),l(" ("+t(e.$t("required_field"))+")",1)]),s("li",null,[l(t(e.$t("csv_column_name_th"))+" ",1),r[3]||(r[3]=s("code",{class:"px-1 text-xs bg-gray-200 rounded dark:bg-gray-600"},"name_th",-1)),l(" ("+t(e.$t("required_field"))+")",1)]),s("li",null,[l(t(e.$t("csv_column_surname_th"))+" ",1),r[4]||(r[4]=s("code",{class:"px-1 text-xs bg-gray-200 rounded dark:bg-gray-600"},"surname_th",-1)),l(" ("+t(e.$t("required_field"))+")",1)]),s("li",null,[l(t(e.$t("csv_column_email"))+" ",1),r[5]||(r[5]=s("code",{class:"px-1 text-xs bg-gray-200 rounded dark:bg-gray-600"},"email",-1)),l(" ("+t(e.$t("required_field"))+", "+t(e.$t("unique_field"))+")",1)]),s("li",null,[l(t(e.$t("csv_column_role"))+" ",1),r[6]||(r[6]=s("code",{class:"px-1 text-xs bg-gray-200 rounded dark:bg-gray-600"},"role",-1)),l(" ("+t(e.$t("optional_field"))+", "+t(e.$t("default_role_note",{defaultRole:"student"}))+")",1)])]),s("p",Z,[l(t(e.$t("csv_example_download"))+" ",1),s("a",ee,t(e.$t("download_template_link")),1)])])])])])])]),_:1})],64))}};export{ae as default};
