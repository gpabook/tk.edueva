import{c as x,o as b,b as a,A as $,a2 as E,y as N,p as S,x as B,d as H,w as M,a as l,u as n,g as T,e as p,m as D,f as _,i as f,S as F,j as v,F as j}from"./app-a8NxV_Wl.js";import{_ as A}from"./AuthenticatedLayout-BXOZ2c7L.js";import{P as C}from"./PrimaryButton-C1J-uQhX.js";import{_ as r}from"./InputLabel-D1hI5clp.js";import{_ as i}from"./TextInput-B6lnT0Jm.js";import{_ as u}from"./InputError-CDdDeoC9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function I(h,o){return b(),x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"fill-rule":"evenodd",d:"M17 10a.75.75 0 0 1-.75.75H5.612l4.158 3.96a.75.75 0 1 1-1.04 1.08l-5.5-5.25a.75.75 0 0 1 0-1.08l5.5-5.25a.75.75 0 1 1 1.04 1.08L5.612 9.25H16.25A.75.75 0 0 1 17 10Z","clip-rule":"evenodd"})])}const P={class:"max-w-4xl py-12 mx-auto"},L={class:"grid grid-cols-3 gap-4"},O={class:"grid grid-cols-2 gap-4 mt-4"},R={class:"grid grid-cols-2 gap-4 mt-4"},W={class:"grid grid-cols-2 gap-4 mt-4"},Z={class:"grid grid-cols-2 gap-4 mt-4"},q=["value"],z={class:"pt-6 mt-6 border-t dark:border-gray-700"},G={class:"grid grid-cols-3 gap-4"},J={class:"grid grid-cols-3 gap-4 mt-4"},K={class:"flex items-center justify-between pt-6 border-t dark:border-gray-700"},ne={__name:"Edit",props:{student:Object,rooms:Array},setup(h){const o=h,V=$(),c=E.useToast();N(()=>{var e;const d=(e=V.props.flash)==null?void 0:e.success;d&&c.success(d,{position:"top-right",duration:3e3})});const m=o.student.guardian||{},y=S(()=>{var e,s;const d=(e=o.student.current_room)==null?void 0:e[0];return d?`${((s=d.class_level)==null?void 0:s.name_th)||""} - ${d.name_room_th||""}`:"ยังไม่ได้กำหนดห้อง"}),w=d=>!d||d.length!==13?d:`${d[0]}-${d.slice(1,5)}-${d.slice(5,10)}-${d.slice(10,12)}-${d[12]}`,k=d=>{let e=d.target.value.replace(/\D/g,"");e.length>13&&(e=e.slice(0,13));let s="";e.length>=1&&(s+=e[0]),e.length>=2&&(s+="-"+e.slice(1,5)),e.length>=6&&(s+="-"+e.slice(5,10)),e.length>=11&&(s+="-"+e.slice(10,12)),e.length===13&&(s+="-"+e[12]),g.value=s},t=B({prefix_th:o.student.prefix_th||"",name_th:o.student.name_th||"",surname_th:o.student.surname_th||"",name_en:o.student.name_en||"",surname_en:o.student.surname_en||"",student_id:o.student.student_id||"",national_id:o.student.national_id||"",email:o.student.email||"",gender:o.student.gender||"",birthday:o.student.birthday||"",guardian_prefix_th:m.prefix_th||"",guardian_name_th:m.name_th||"",guardian_surname_th:m.surname_th||"",guardian_phone_1:m.phone_1||"",guardian_phone_2:m.phone_2||"",guardian_relationship:m.relationship||""}),g=H(w(t.national_id));M(g,d=>{t.national_id=d.replace(/\D/g,"")});const U=()=>{t.put(route("students.update",o.student.id))};return(d,e)=>(b(),x(j,null,[l(n(T),{title:"Edit Student"}),l(A,null,{header:p(()=>e[16]||(e[16]=[a("h2",{class:"text-xl font-semibold text-gray-800 dark:text-gray-200"},"Edit Student",-1)])),default:p(()=>[a("div",P,[a("form",{onSubmit:D(U,["prevent"]),class:"p-6 space-y-10 bg-white rounded shadow dark:bg-gray-800 dark:text-white"},[a("section",null,[e[19]||(e[19]=a("h3",{class:"mb-4 text-lg font-bold text-gray-700 dark:text-white"},"ข้อมูลนักเรียน",-1)),a("div",L,[a("div",null,[l(r,{for:"prefix_th",value:"คำนำหน้า (TH)"}),_(a("select",{id:"prefix_th","onUpdate:modelValue":e[0]||(e[0]=s=>n(t).prefix_th=s),class:"w-full p-2 mt-1 border rounded dark:bg-gray-700 dark:text-white"},e[17]||(e[17]=[a("option",{value:""},"-- เลือก --",-1),a("option",{value:"ด.ช."},"ด.ช.",-1),a("option",{value:"ด.ญ."},"ด.ญ.",-1),a("option",{value:"นาย"},"นาย",-1),a("option",{value:"นางสาว"},"นางสาว",-1)]),512),[[f,n(t).prefix_th]]),l(u,{message:n(t).errors.prefix_th},null,8,["message"])]),a("div",null,[l(r,{for:"name_th",value:"ชื่อ (TH)"}),l(i,{id:"name_th",modelValue:n(t).name_th,"onUpdate:modelValue":e[1]||(e[1]=s=>n(t).name_th=s),class:"block w-full mt-1"},null,8,["modelValue"]),l(u,{message:n(t).errors.name_th},null,8,["message"])]),a("div",null,[l(r,{for:"surname_th",value:"นามสกุล (TH)"}),l(i,{id:"surname_th",modelValue:n(t).surname_th,"onUpdate:modelValue":e[2]||(e[2]=s=>n(t).surname_th=s),class:"block w-full mt-1"},null,8,["modelValue"]),l(u,{message:n(t).errors.surname_th},null,8,["message"])])]),a("div",O,[a("div",null,[l(r,{for:"name_en",value:"ชื่อ (EN)"}),l(i,{id:"name_en",modelValue:n(t).name_en,"onUpdate:modelValue":e[3]||(e[3]=s=>n(t).name_en=s),class:"block w-full mt-1"},null,8,["modelValue"])]),a("div",null,[l(r,{for:"surname_en",value:"นามสกุล (EN)"}),l(i,{id:"surname_en",modelValue:n(t).surname_en,"onUpdate:modelValue":e[4]||(e[4]=s=>n(t).surname_en=s),class:"block w-full mt-1"},null,8,["modelValue"])])]),a("div",R,[a("div",null,[l(r,{for:"student_id",value:"รหัสนักเรียน"}),l(i,{id:"student_id",modelValue:n(t).student_id,"onUpdate:modelValue":e[5]||(e[5]=s=>n(t).student_id=s),class:"block w-full mt-1"},null,8,["modelValue"]),l(u,{message:n(t).errors.student_id},null,8,["message"])]),a("div",null,[l(r,{for:"national_id",value:"เลขบัตรประชาชน"}),l(i,{id:"national_id",modelValue:g.value,"onUpdate:modelValue":e[6]||(e[6]=s=>g.value=s),onInput:k,class:"block w-full mt-1",maxlength:"17",inputmode:"numeric",placeholder:"x-xxxx-xxxxx-xx-x"},null,8,["modelValue"]),l(u,{message:n(t).errors.national_id},null,8,["message"])])]),a("div",W,[a("div",null,[l(r,{for:"email",value:"Email"}),l(i,{id:"email",modelValue:n(t).email,"onUpdate:modelValue":e[7]||(e[7]=s=>n(t).email=s),type:"email",class:"block w-full mt-1"},null,8,["modelValue"]),l(u,{message:n(t).errors.email},null,8,["message"])]),a("div",null,[l(r,{for:"birthday",value:"วันเกิด"}),l(i,{id:"birthday",modelValue:n(t).birthday,"onUpdate:modelValue":e[8]||(e[8]=s=>n(t).birthday=s),type:"date",class:"block w-full mt-1"},null,8,["modelValue"]),l(u,{message:n(t).errors.birthday},null,8,["message"])])]),a("div",Z,[a("div",null,[l(r,{for:"gender",value:"เพศ"}),_(a("select",{id:"gender","onUpdate:modelValue":e[9]||(e[9]=s=>n(t).gender=s),class:"w-full p-2 mt-1 border rounded dark:bg-gray-700 dark:text-white"},e[18]||(e[18]=[a("option",{value:""},"-- เลือกเพศ --",-1),a("option",{value:"male"},"ชาย",-1),a("option",{value:"female"},"หญิง",-1)]),512),[[f,n(t).gender]]),l(u,{message:n(t).errors.gender},null,8,["message"])]),a("div",null,[l(r,{for:"room_id",value:"ห้องเรียน (ปัจจุบัน)"}),a("input",{id:"room_id",type:"text",value:y.value,disabled:"",readonly:"",class:"w-full p-2 mt-1 bg-gray-100 border rounded cursor-not-allowed dark:bg-gray-700 dark:text-white"},null,8,q)])])]),a("section",z,[e[21]||(e[21]=a("h3",{class:"mb-4 text-lg font-bold text-gray-700 dark:text-white"},"ข้อมูลผู้ปกครอง",-1)),a("div",G,[a("div",null,[l(r,{for:"guardian_prefix_th",value:"คำนำหน้า"}),_(a("select",{id:"guardian_prefix_th","onUpdate:modelValue":e[10]||(e[10]=s=>n(t).guardian_prefix_th=s),class:"w-full p-2 mt-1 border rounded dark:bg-gray-700 dark:text-white"},e[20]||(e[20]=[a("option",{value:""},"-- เลือก --",-1),a("option",{value:"นาย"},"นาย",-1),a("option",{value:"นาง"},"นาง",-1),a("option",{value:"นางสาว"},"นางสาว",-1)]),512),[[f,n(t).guardian_prefix_th]]),l(u,{message:n(t).errors.guardian_prefix_th},null,8,["message"])]),a("div",null,[l(r,{for:"guardian_name_th",value:"ชื่อ"}),l(i,{id:"guardian_name_th",modelValue:n(t).guardian_name_th,"onUpdate:modelValue":e[11]||(e[11]=s=>n(t).guardian_name_th=s),class:"block w-full mt-1"},null,8,["modelValue"]),l(u,{message:n(t).errors.guardian_name_th},null,8,["message"])]),a("div",null,[l(r,{for:"guardian_surname_th",value:"นามสกุล"}),l(i,{id:"guardian_surname_th",modelValue:n(t).guardian_surname_th,"onUpdate:modelValue":e[12]||(e[12]=s=>n(t).guardian_surname_th=s),class:"block w-full mt-1"},null,8,["modelValue"]),l(u,{message:n(t).errors.guardian_surname_th},null,8,["message"])])]),a("div",J,[a("div",null,[l(r,{for:"guardian_phone_1",value:"เบอร์โทรศัพท์ 1"}),l(i,{id:"guardian_phone_1",modelValue:n(t).guardian_phone_1,"onUpdate:modelValue":e[13]||(e[13]=s=>n(t).guardian_phone_1=s),class:"block w-full mt-1"},null,8,["modelValue"]),l(u,{message:n(t).errors.guardian_phone_1},null,8,["message"])]),a("div",null,[l(r,{for:"guardian_phone_2",value:"เบอร์โทรศัพท์ 2"}),l(i,{id:"guardian_phone_2",modelValue:n(t).guardian_phone_2,"onUpdate:modelValue":e[14]||(e[14]=s=>n(t).guardian_phone_2=s),class:"block w-full mt-1"},null,8,["modelValue"]),l(u,{message:n(t).errors.guardian_phone_2},null,8,["message"])]),a("div",null,[l(r,{for:"guardian_relationship",value:"ความสัมพันธ์"}),l(i,{id:"guardian_relationship",modelValue:n(t).guardian_relationship,"onUpdate:modelValue":e[15]||(e[15]=s=>n(t).guardian_relationship=s),placeholder:"เช่น บิดา, มารดา",class:"block w-full mt-1"},null,8,["modelValue"]),l(u,{message:n(t).errors.guardian_relationship},null,8,["message"])])])]),a("div",K,[l(n(F),{href:d.route("students.index"),class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-gray-500 rounded-lg hover:bg-gray-600 dark:bg-gray-600 dark:hover:bg-gray-500"},{default:p(()=>[l(n(I),{class:"w-5 h-5 mr-2"}),e[22]||(e[22]=v(" ย้อนกลับ "))]),_:1},8,["href"]),l(C,{disabled:n(t).processing},{default:p(()=>e[23]||(e[23]=[v("บันทึก")])),_:1},8,["disabled"])])],32)])]),_:1})],64))}};export{ne as default};
